import{_ as b,r as f,o as N,p as u,q as S,C as p,a as w,b as n,c as i,d as t,u as C,t as l,F as v,e as y,f as h,g as D,w as E,n as T}from"./index-1d20f0bf.js";const U={name:"App",data(){return{PostMain:"/PostMain"}},setup(){const r=f(!1),a=f({userEmail:"",userIntro:"",userName:"",profileImg:""}),m=f({}),s=async()=>{const e=await h("user/getUserInfo",JSON.parse(u.getLocalStorage(p.KEY_LIST.USER_INFO)));e.data?a.value=await e.data:alert("데이터를 불러오는데 실패했습니다.")},I=async()=>{const e=await h("user/getBoardList",JSON.parse(u.getLocalStorage(p.KEY_LIST.USER_INFO)));if(e.data){m.value=await e.data;for(let _ in e.data)e.data[_].color=`hsl(${parseInt(Math.random()*24,10)*15}, 16%, 75%)`}else alert("게시물 정보를 불러올 수 없습니다."),await S.push("/")},d=new FormData,g=async e=>{d.set("userIdx",JSON.parse(u.getLocalStorage(p.KEY_LIST.USER_INFO)).userIdx),d.set("file",e.target.files[0]),await h("user/uploadProfile",d).then(_=>{setTimeout(()=>{alert("프로필 사진 변경 완료!"),location.reload()},1500)}).catch(_=>{console.log(_),alert("다시 시도해주세요.")})},o=()=>{r.value=!0},c=async()=>{await h("user/updateProfile",a.value).then(e=>{a.value.editing=!1,alert("업데이트 성공!"),location.reload()}).catch(e=>{console.log(e),alert("업데이트 실패!")})};return N(()=>{u.loginCheck()?(s(),I()):(alert("로그인 후에 이용해주세요"),S.push("/"))}),{userData:a,boardData:m,profileImgUpload:g,CONSTANTS:p,editing:r,startEditing:o,saveUsername:c,uploadCompleteButton:!1}}},L={class:"mypage-container"},k={class:"profile-container"},x={class:"profile-box"},O={class:"profile-img-box"},F={class:"profile-img"},P=["src"],A={class:"action-button"},B={class:"profile-info"},M={class:"my-Crew"},R=t("div",{class:"crewpost"},[t("h2",null,"내 크루")],-1),J={class:"photo-gallery"},K={class:"photo-container"},V={class:"rounded-photo"},Y=["src"],q={class:"photo-name"},z={class:"divider"},j=t("div",{class:"mypost"},[t("h2",null,"내 게시물 보기")],-1),G={class:"mypost-container"},H={class:"container"},Q={class:"box-summary"},W={class:"board-title"},X={class:"board-contents"},Z={class:"circle"},$=["src"],tt={class:"username"},st=t("span",{style:{"font-weight":"lighter"}},"by ",-1),ot={style:{"font-weight":"bold"}};function et(r,a,m,s,I,d){const g=w("router-link");return n(),i("div",L,[t("div",k,[t("div",x,[t("div",O,[t("div",F,[t("img",{src:s.CONSTANTS.API_URL+s.userData.profileImg,alt:""},null,8,P)]),t("label",A,[C(" 이미지 변경 "),t("input",{style:{display:"none"},type:"file",accept:"image/*",multiple:"multiple",onChange:a[0]||(a[0]=(...o)=>s.profileImgUpload&&s.profileImgUpload(...o))},null,32)])]),t("div",B,[t("p",null,l(s.userData.userName),1),t("p",null,l(s.userData.userEmail),1),t("p",null,l(s.userData.userIntro),1),t("button",{class:"action-button",onClick:a[1]||(a[1]=(...o)=>s.startEditing&&s.startEditing(...o))}," 개인정보 수정 ")])])]),t("div",M,[R,t("div",J,[(n(!0),i(v,null,y(r.groups,o=>(n(),i("div",{key:o.id,class:"photo-group"},[t("h2",null,l(r.CrewInfo.CrewName),1),t("div",K,[(n(!0),i(v,null,y(o.photos,c=>(n(),i("div",{key:c.id,class:"photo-item"},[t("div",V,[t("img",{src:r.CrewInfo.CrewImg,alt:"사진"},null,8,Y)]),t("p",q,l(c.name),1)]))),128))])]))),128))])]),t("div",z,[j,t("div",G,[t("div",H,[(n(!0),i(v,null,y(s.boardData,(o,c)=>(n(),i("div",{class:"box",key:c},[D(g,{to:{name:"PostMain",query:{id:o._id}}},{default:E(()=>[t("div",{class:"box-img",style:T(`background-color: ${o.color}`)},null,4)]),_:2},1032,["to"]),t("div",Q,[t("div",null,[t("div",W,l(o.boardTitle),1),t("div",X,l(o.boardContents),1)]),t("div",Z,[t("img",{src:s.CONSTANTS.API_URL+s.userData.profileImg,alt:""},null,8,$)]),t("div",tt,[st,t("span",ot,l(o.userName),1)])])]))),128))])])])])}const lt=b(U,[["render",et]]);export{lt as default};
